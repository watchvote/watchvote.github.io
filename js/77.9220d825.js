"use strict";(self["webpackChunkwatch_vote"]=self["webpackChunkwatch_vote"]||[]).push([[77],{1077:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var n=a(3673),o=a(2323);(0,n.dD)("data-v-1e7f70f6");const i=(0,n._)("div",{class:"page-title"},"Чек-лист",-1),s={class:"text-subtitle1 text-primary no-margin no-padding"},l=["href"],d={key:2},r=(0,n.Uk)("Подробнее");function u(e,t,a,u,c,m){const p=(0,n.up)("q-item-label"),v=(0,n.up)("q-item-section"),w=(0,n.up)("q-checkbox"),f=(0,n.up)("q-btn"),h=(0,n.up)("q-item"),g=(0,n.up)("q-list"),k=(0,n.up)("q-expansion-item"),b=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(b,{padding:""},{default:(0,n.w5)((()=>[i,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.$store.state.observation.currentObservation.sections,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t.id,class:"q-mb-sm"},[t.title?((0,n.wg)(),(0,n.j4)(p,{key:0,header:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.title),1)])),_:2},1024)):(0,n.kq)("",!0),(0,n.Wm)(k,{"dense-toggle":"","model-value":t.isOpen,class:"checklist","onUpdate:modelValue":a=>e.setSectionOpen(t,a)},{header:(0,n.w5)((()=>[(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n._)("p",s,(0,o.zw)(t.name),1)])),_:2},1024),(0,n.Wm)(v,{side:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(e.doneCount(t.actions))+" / "+(0,o.zw)(t.actions.length),1)])),_:2},1024)])),default:(0,n.w5)((()=>[(0,n.Wm)(g,{bordered:"",padding:"",separator:""},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.actions,(t=>((0,n.wg)(),(0,n.j4)(h,{key:t.id,class:"q-pa-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{side:"",top:"",class:"q-pr-sm"},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{modelValue:t.isDone,"onUpdate:modelValue":a=>e.setActionState(t,a)},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,null,{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.text),1)])),_:2},1024),t.link?((0,n.wg)(),(0,n.j4)(p,{key:0,class:"q-py-sm"},{default:(0,n.w5)((()=>[(0,n._)("a",{href:t.link,target:"_blank"},"Смотреть",8,l)])),_:2},1024)):(0,n.kq)("",!0),t.variables.length?((0,n.wg)(),(0,n.j4)(g,{key:1,separator:"",dense:"",class:"q-my-md q-mr-md"},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(this.$store.state.observation.actionVariables[t.id],(t=>((0,n.wg)(),(0,n.j4)(h,{key:t.id,class:"no-padding"},{default:(0,n.w5)((()=>[(0,n.Wm)(v,{class:"text-bold"},{default:(0,n.w5)((()=>[(0,n.Uk)((0,o.zw)(t.name),1)])),_:2},1024),(0,n.Wm)(v,{side:"",class:"text-bold q-pr-md"},{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.Uk)((0,o.zw)(t.value)+" ",1),(0,n.Wm)(f,{flat:"",dense:"",round:"",icon:"create",onClick:a=>e.setVariableValue(t)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):(0,n.kq)("",!0),t.descr||t.law||t.resp?((0,n.wg)(),(0,n.iD)("div",d,[(0,n.Wm)(f,{flat:"",color:"blue-grey-8 float-right",align:"left","no-caps":"",onClick:a=>e.showDetails(t)},{default:(0,n.w5)((()=>[r])),_:2},1032,["onClick"])])):(0,n.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["model-value","onUpdate:modelValue"])])))),128))])),_:1})}(0,n.Cn)();var c=function(e,t,a,n){function o(e){return e instanceof a?e:new a((function(t){t(e)}))}return new(a||(a=Promise))((function(a,i){function s(e){try{d(n.next(e))}catch(t){i(t)}}function l(e){try{d(n["throw"](e))}catch(t){i(t)}}function d(e){e.done?a(e.value):o(e.value).then(s,l)}d((n=n.apply(e,t||[])).next())}))};const m=(0,n.aZ)({data:()=>({}),created(){return c(this,void 0,void 0,(function*(){}))},computed:{sections(){return this.$store.state.observation.currentObservation}},methods:{doneCount(e){var t=0;for(var a of e)!0===a.isDone&&t++;return t},showDetails(e){return c(this,void 0,void 0,(function*(){this.$store.commit("observation/selectAction",e),yield this.$router.push("/action")}))},setActionState(e,t){const a=this.$store.state.observation.actionVariables[e.id];!0===t&&(null===a||void 0===a?void 0:a.length)>0&&a.some((e=>void 0==e.value))?this.$q.dialog({title:"Не введено значение",message:'Чтобы отметить выполненным, нужно ввести значение. Нажмите "Подробнее" для этого'}):this.$store.commit("observation/setActionState",{action:e,value:t})},setSectionOpen(e,t){this.$store.commit("observation/setSectionOpen",{section:e,value:t})},setVariableValue(e){var t;this.$q.dialog({message:e.name,ok:"Ок",cancel:"Отмена",prompt:{model:(null===(t=e.value)||void 0===t?void 0:t.toString())||"",type:"number"},persistent:!0}).onOk((t=>{this.$store.commit("observation/setVariableValue",{variable:e,value:t})}))}}});var p=a(4379),v=a(2350),w=a(4554),f=a(4615),h=a(2035),g=a(7011),k=a(3414),b=a(5735),_=a(8240),q=a(7518),y=a.n(q);m.render=u,m.__scopeId="data-v-1e7f70f6";const V=m;y()(m,"components",{QPage:p.Z,QItemLabel:v.Z,QIcon:w.Z,QExpansionItem:f.Z,QItemSection:h.Z,QList:g.Z,QItem:k.Z,QCheckbox:b.Z,QBtn:_.Z})}}]);
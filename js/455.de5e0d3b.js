"use strict";(self["webpackChunkwatch_vote"]=self["webpackChunkwatch_vote"]||[]).push([[455],{8455:(e,t,o)=>{o.r(t),o.d(t,{default:()=>q});var a=o(3673),n=o(2323);const i=(0,a._)("div",{class:"page-title"},"Чек-лист",-1),s={class:"text-subtitle1 text-primary no-margin no-padding"},l=(0,a.Uk)("Подробнее");function u(e,t,o,u,r,d){const c=(0,a.up)("q-item-label"),m=(0,a.up)("q-item-section"),p=(0,a.up)("q-checkbox"),v=(0,a.up)("q-btn"),w=(0,a.up)("q-item"),f=(0,a.up)("q-list"),h=(0,a.up)("q-expansion-item"),b=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(b,{padding:""},{default:(0,a.w5)((()=>[i,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.$store.state.observation.currentObservation.sections,(t=>((0,a.wg)(),(0,a.iD)("div",{key:t.id,class:"q-mb-sm"},[t.title?((0,a.wg)(),(0,a.j4)(c,{key:0,header:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.title),1)])),_:2},1024)):(0,a.kq)("",!0),(0,a.Wm)(h,{"dense-toggle":"","model-value":t.isOpen,class:"checklist","onUpdate:modelValue":o=>e.setSectionOpen(t,o)},{header:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a._)("p",s,(0,n.zw)(t.name),1)])),_:2},1024),(0,a.Wm)(m,{side:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.doneCount(t.actions))+" / "+(0,n.zw)(t.actions.length),1)])),_:2},1024)])),default:(0,a.w5)((()=>[(0,a.Wm)(f,{bordered:"",padding:"",separator:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.actions,(t=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,class:"q-pa-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{side:"",top:"",class:"q-pr-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{modelValue:t.isDone,"onUpdate:modelValue":o=>e.setActionState(t,o)},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024),(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.text),1)])),_:2},1024),t.variables.length?((0,a.wg)(),(0,a.j4)(f,{key:0,separator:"",dense:"",class:"q-my-md q-mr-md"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(this.$store.state.observation.actionVariables[t.id],(t=>((0,a.wg)(),(0,a.j4)(w,{key:t.id,class:"no-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{class:"text-bold"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(t.name),1)])),_:2},1024),(0,a.Wm)(m,{side:"",class:"text-bold q-pr-md"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Uk)((0,n.zw)(t.value)+" ",1),(0,a.Wm)(v,{flat:"",dense:"",round:"",icon:"create",onClick:o=>e.setVariableValue(t)},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)):(0,a.kq)("",!0),(0,a._)("div",null,[(0,a.Wm)(v,{flat:"",color:"blue-grey-8 float-right",align:"left","no-caps":"",onClick:o=>e.showDetails(t)},{default:(0,a.w5)((()=>[l])),_:2},1032,["onClick"])])])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["model-value","onUpdate:modelValue"])])))),128))])),_:1})}var r=function(e,t,o,a){function n(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,i){function s(e){try{u(a.next(e))}catch(t){i(t)}}function l(e){try{u(a["throw"](e))}catch(t){i(t)}}function u(e){e.done?o(e.value):n(e.value).then(s,l)}u((a=a.apply(e,t||[])).next())}))};const d=(0,a.aZ)({data:()=>({}),created(){return r(this,void 0,void 0,(function*(){}))},computed:{sections(){return this.$store.state.observation.currentObservation}},methods:{doneCount(e){var t=0;for(var o of e)!0===o.isDone&&t++;return t},showDetails(e){return r(this,void 0,void 0,(function*(){this.$store.commit("observation/selectAction",e),yield this.$router.push("/action")}))},setActionState(e,t){const o=this.$store.state.observation.actionVariables[e.id];!0===t&&(null===o||void 0===o?void 0:o.length)>0&&o.some((e=>void 0==e.value))?this.$q.dialog({title:"Не введено значение",message:'Чтобы отметить выполненным, нужно ввести значение. Нажмите "Подробнее" для этого'}):this.$store.commit("observation/setActionState",{action:e,value:t})},setSectionOpen(e,t){this.$store.commit("observation/setSectionOpen",{section:e,value:t})},setVariableValue(e){var t;this.$q.dialog({message:e.name,ok:"Ок",cancel:"Отмена",prompt:{model:(null===(t=e.value)||void 0===t?void 0:t.toString())||"",type:"number"},persistent:!0}).onOk((t=>{this.$store.commit("observation/setVariableValue",{variable:e,value:t})}))}}});var c=o(4379),m=o(2350),p=o(4554),v=o(4615),w=o(2035),f=o(7011),h=o(3414),b=o(5735),g=o(8240),k=o(7518),_=o.n(k);d.render=u;const q=d;_()(d,"components",{QPage:c.Z,QItemLabel:m.Z,QIcon:p.Z,QExpansionItem:v.Z,QItemSection:w.Z,QList:f.Z,QItem:h.Z,QCheckbox:b.Z,QBtn:g.Z})}}]);